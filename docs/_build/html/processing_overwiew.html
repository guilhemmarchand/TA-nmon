

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Processing overview &mdash; TA-nmon 1.3.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="author" title="About these documents"
              href="about.html"/>
    <link rel="top" title="TA-nmon 1.3.0 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> TA-nmon
          

          
          </a>

          
            
            
              <div class="version">
                1.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="about.html">About the TA-nmon, technical addon for Nmon Performance app for Splunk</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="openissue.html">Issues and enhancement requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="os_compatibility.html">Operating Systems compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="footprint.html">System footprint</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">TA-nmon</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Processing overview</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/processing_overwiew.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="processing-overview">
<h1>Processing overview<a class="headerlink" href="#processing-overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="nmon-processing">
<h2>Nmon processing<a class="headerlink" href="#nmon-processing" title="Permalink to this headline">¶</a></h2>
<p>The TA-nmon embeds different scripts to perform various tasks from starting nmon binaries to the creation of the final data to be indexed by Splunk.</p>
<p>The following items expose the main steps of the processing, the technical details of each scripts and options are globally covered by the documentation.</p>
<div class="section" id="bin-nmon-helper-sh">
<h3>bin/nmon_helper.sh<a class="headerlink" href="#bin-nmon-helper-sh" title="Permalink to this headline">¶</a></h3>
<p><strong>The &#8220;nmon_helper.sh&#8221; script is scheduled to be run every 60 seconds by Splunk, it is responsible for various tasks such as:</strong></p>
<ul class="simple">
<li>identify the system (OS, processor architecture...)</li>
<li>load default and custom configurations</li>
<li>identify the best nmon binary candidate</li>
<li>identify the running nmon process</li>
<li>identify fifo_reader process running, and start the reader</li>
<li>start the nmon binary</li>
</ul>
<p><em>Simplified representation of the processing tasks:</em></p>
<img alt="nmon_helper_processing.png" class="align-center" src="_images/nmon_helper_processing.png" />
</div>
<div class="section" id="bin-fifo-consumer-sh">
<h3>bin/fifo_consumer.sh<a class="headerlink" href="#bin-fifo-consumer-sh" title="Permalink to this headline">¶</a></h3>
<p><strong>The &#8220;fifo_consumer.sh&#8221; script is scheduled to be run every 60 seconds by Splunk, its purpose is consuming the dat files (different part of the nmon file) and stream its content to nmon2csv parsers:</strong></p>
<ul class="simple">
<li>access the fifo files, wait at least 5 seconds since its last update</li>
<li>Stream the content of the files to the nmon2csv parser</li>
<li>empty the nmon_data.dat files for the next cycle</li>
</ul>
</div>
<div class="section" id="bin-nmon2csv-sh-py-pl">
<h3>bin/nmon2csv.sh|.py|.pl<a class="headerlink" href="#bin-nmon2csv-sh-py-pl" title="Permalink to this headline">¶</a></h3>
<p><strong>These are the nmon2csv parsers:</strong></p>
<ul class="simple">
<li>the nmon2csv.sh is a simple wrapper which will choose between the Python and Perl parser</li>
<li>the content is being read in stdin, and piped to the nmon2csv Python or Perl parser</li>
<li>the Python or Perf parser reads the data, does various processing tasks and generate the final files to be indexed by Splunk</li>
</ul>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Guilhem Marchand.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.3.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>